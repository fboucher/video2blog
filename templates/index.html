<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video2Blog - Turn Videos Into Blog Posts</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="material-symbols-rounded header-icon">article</span> Video 2 Blog</h1>
            <p>Transform videos into blog posts with AI-powered Q&A and screenshot extraction</p>
        </header>

        <main>
            <!-- Step 1: Select or Upload Video -->
            <details class="card" id="upload-section" open>
                <summary><h2>Step 1: Select or Upload Video</h2></summary>

                <div class="upload-tabs">
                    <button class="upload-tab active" data-tab="file" onclick="switchUploadTab('file')">
                        <span class="material-symbols-rounded">upload_file</span>
                        Upload File
                    </button>
                    <button class="upload-tab" data-tab="url" onclick="switchUploadTab('url')">
                        <span class="material-symbols-rounded">link</span>
                        From URL
                    </button>
                </div>

                <div id="file-upload-area" class="upload-area-compact">
                    <div class="upload-form">
                        <div class="form-group">
                            <label for="file-video-name" class="form-label">Video Name (optional)</label>
                            <input type="text" id="file-video-name" placeholder="Enter a name for your video" class="form-input">
                        </div>
                        <input type="file" id="video-input" accept="video/*" hidden>
                        <label for="video-input" class="upload-label-compact">
                            <span class="material-symbols-rounded">upload_file</span>
                            <span>Upload New Video</span>
                        </label>
                    </div>
                </div>

                <div id="url-upload-area" class="upload-area-compact hidden">
                    <div class="upload-form">
                        <div class="form-group">
                            <label for="url-video-name" class="form-label">Video Name (optional)</label>
                            <input type="text" id="url-video-name" placeholder="Enter a name for your video" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="url-input" class="form-label">Video URL</label>
                            <div class="url-input-container">
                                <input type="text" id="url-input" placeholder="Enter video URL (YouTube, Vimeo, or direct link)" class="url-input">
                                <button id="url-upload-btn" class="btn btn-primary">
                                    <span class="material-symbols-rounded">cloud_upload</span>
                                    Upload to Reka
                                </button>
                            </div>
                            <small class="url-help-text">Supports YouTube, Vimeo, and direct video URLs</small>
                        </div>
                    </div>
                </div>

                <div id="videos-section">
                    <div class="videos-header">
                        <h3>
                            <span class="material-symbols-rounded" style="vertical-align: middle;">video_library</span>
                            Your Videos
                        </h3>
                        <button id="refresh-videos-btn" class="btn-icon" onclick="loadAllVideos()" title="Refresh video list">
                            <span class="material-symbols-rounded">refresh</span>
                        </button>
                    </div>
                    <div id="videos-list" class="videos-list">
                        <div class="loading-files">Loading videos...</div>
                    </div>
                </div>
                
                <div id="video-info" class="video-info hidden"></div>
            </details>

            <!-- Step 2: Ask Questions About Video -->
            <details class="card" id="chat-section" style="display: none;" open>
                <summary><h2>
                    Step 2: Ask Questions About This Video
                </h2></summary>
                <div id="chat-messages" class="chat-messages"></div>
                <div class="chat-input-area">
                    <textarea id="chat-input" placeholder="How would you like I write the blog post?" rows="5"></textarea>
                    <button id="chat-send-btn" class="btn btn-primary">
                        <span class="material-symbols-rounded">send</span>
                        Send
                    </button>
                </div>
            </details>

            <!-- Step 3: Configure Extraction -->
            <details class="card" id="params-section" style="display: none;" open>
                <summary><h2>Step 3: Configure Extraction</h2></summary>

                <div id="timestamp-params" class="params-group">
                    <div class="form-group">
                        <label for="timestamps">Timestamps (seconds)</label>
                        <input type="text" id="timestamps" placeholder="10.5, 25, 60.3">
                        <small>Comma-separated list of timestamps in seconds (decimals or integers)</small>
                    </div>
                    <div class="form-group">
                        <label for="frames-per-timestamp">Frames per Timestamp</label>
                        <input type="number" id="frames-per-timestamp" value="1" min="1" max="5">
                        <small>Number of frames to extract around each timestamp</small>
                    </div>
                </div>

                <button id="extract-btn" class="btn btn-primary">Extract Frames</button>
            </details>

            <!-- Step 4: Extraction Results -->
            <details class="card" id="results-section" style="display: none;" open>
                <summary><h2>Step 4: Extraction Results</h2></summary>
                <div id="progress" class="progress hidden">
                    <div class="spinner"></div>
                    <p>Processing video...</p>
                </div>
                <div id="results-content" class="results-content hidden"></div>
            </details>
        </main>
    </div>

    <footer>
        <div class="footer-content">
            <span>Video2Blog <span class="footer-version">v{{ version }}</span></span>
            <span class="footer-sep">&middot;</span>
            <a href="https://github.com/fboucher/video2blog" target="_blank" rel="noopener noreferrer">
                <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle;">code</span>
                GitHub
            </a>
            <span class="footer-sep">&middot;</span>
            <span>2026</span>
            <span class="footer-sep">&middot;</span>
            <span class="footer-version">Frank Boucher</span>
            <span class="footer-sep">&middot;</span>
            <span>c5m</span>
            <span class="footer-sep">&middot;</span>
            <span>MIT License</span>
        </div>
    </footer>

    <div id="toast-container"></div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
